vlans:
    office:
        vid: 100
        description: "office network"

dps:
    sw1:
        dp_id: 0x1
        hardware: "Open vSwitch"
        interfaces:
            1:
                name: "s1-eth1"
                description: "host1 network namespace"
                native_vlan: office
                acls_in: [nfv-dns]
            2:
                name: "s1-eth2"
                description: "host2 network namespace"
                native_vlan: office
                acls_in: [nfv-dns]
            3:
                name: "s1-eth3"
                description: "bah"
                native_vlan: office
                acls_in: [nfv-dns]
acls:
    nfv-dns:
        # Force UDP DNS to our DNS server
        - rule:
            dl_type: 0x800      # ipv4
            nw_proto: 17        # udp
            udp_dst: 53         # dns
            actions:
                mirror:  s1-eth2
                allow: True
        # Force TCP DNS to our DNS server
        - rule:
            dl_type: 0x800      # ipv4
            nw_proto: 6         # tcp
            tcp_dst: 53         # dns
            actions:
                mirror: s1-eth2
                allow: True
    allow-all:
        - rule:
            actions:
                allow: True
